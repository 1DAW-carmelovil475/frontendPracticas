<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Dashboard | MenuSense</title>
  <link rel="stylesheet" href="estilos_bienvenida.css" />
</head>
<body class="dashboard-page">

  <!-- TOP HEADER -->
  <header class="top-header">
    <div class="header-left">
      <div class="logo">
        <span class="logo-icon">üçΩÔ∏è</span>
        <span class="logo-text">MenuSense</span>
      </div>
    </div>

    <!-- NAVIGATION MENU -->
    <nav class="top-nav">
      <a href="#" class="nav-link active" data-section="buscar">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="m21 21-4.35-4.35"></path>
        </svg>
        <span>Restaurantes</span>
      </a>

      <a href="#" class="nav-link" data-section="favoritos">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
        </svg>
        <span>Favoritos</span>
      </a>

      <a href="#" class="nav-link" data-section="comparativas">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="20" x2="18" y2="10"></line>
          <line x1="12" y1="20" x2="12" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="14"></line>
        </svg>
        <span>Comparativas</span>
      </a>

      <a href="#" class="nav-link" data-section="analisis">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
          <line x1="16" y1="13" x2="8" y2="13"></line>
          <line x1="16" y1="17" x2="8" y2="17"></line>
        </svg>
        <span>An√°lisis</span>
      </a>

      <a href="#" class="nav-link" data-section="historial">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        <span>Historial</span>
      </a>

      <a href="#" class="nav-link" data-section="perfil">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
        <span>Perfil</span>
      </a>

      <a href="#" class="nav-link" data-section="configuracion">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M12 1v6m0 6v6m-9-9h6m6 0h6"></path>
        </svg>
        <span>Ajustes</span>
      </a>
    </nav>

    <div class="header-right">
      <span class="user-name" id="headerUserName">Usuario</span>
      <div class="user-avatar" id="userAvatar">U</div>
      <button class="btn-logout" id="logoutBtn">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
          <polyline points="16 17 21 12 16 7"></polyline>
          <line x1="21" y1="12" x2="9" y2="12"></line>
        </svg>
      </button>
    </div>
  </header>

  <!-- SIDEBAR -->
  <aside class="sidebar visible" id="sidebar">
    <div class="search-panel">
      <div class="search-bar-container">
        <div class="search-input-wrapper">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input type="text" id="searchInput" placeholder="Buscar restaurantes..." />
        </div>
        <button class="btn-search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </button>
      </div>

      <div class="filters-section">
        <select class="filter-select">
          <option>Categor√≠a</option>
          <option>Italiana</option>
          <option>Mexicana</option>
          <option>Asi√°tica</option>
          <option>Espa√±ola</option>
          <option>Saludable</option>
        </select>

        <select class="filter-select">
          <option>Precio</option>
          <option>‚Ç¨ - Econ√≥mico</option>
          <option>‚Ç¨‚Ç¨ - Moderado</option>
          <option>‚Ç¨‚Ç¨‚Ç¨ - Alto</option>
        </select>

        <select class="filter-select">
          <option>Distancia</option>
          <option>Menos de 1 km</option>
          <option>Menos de 5 km</option>
          <option>Menos de 10 km</option>
        </select>
      </div>

      <button class="btn-compare" id="btnCompare">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="20" x2="18" y2="10"></line>
          <line x1="12" y1="20" x2="12" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="14"></line>
        </svg>
        Comparar Restaurantes
      </button>
    </div>

    <div class="results-list" id="resultsList">
      <h3>Resultados cercanos</h3>
      <div class="restaurant-list">
        <p class="no-results">Realiza una b√∫squeda para ver restaurantes</p>
      </div>
    </div>
  </aside>

  <!-- MAIN CONTENT -->
  <main class="main-content">
    
    <!-- BUSCAR RESTAURANTES (MAP VIEW) -->
    <section id="buscar" class="content-section map-view active">
      <div class="map-container">
        <div id="map" class="map-placeholder">
          <div class="map-overlay">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
            <h3>Google Maps</h3>
            <p>Aqu√≠ se integrar√° la API de Google Maps</p>
          </div>
        </div>
      </div>
    </section>

    <!-- MIS FAVORITOS -->
    <section id="favoritos" class="content-section">
      <div class="section-header">
        <div>
          <h1>Mis Favoritos</h1>
          <p>Restaurantes que has guardado</p>
        </div>
      </div>

      <div id="favoritosList" class="results-grid">
        <div class="empty-state">
          <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
          </svg>
          <h3>No tienes favoritos a√∫n</h3>
          <p>Guarda restaurantes para acceder r√°pidamente a ellos</p>
        </div>
      </div>
    </section>

    <!-- COMPARATIVAS -->
    <section id="comparativas" class="content-section">
      <div class="section-header">
        <div>
          <h1>Comparativas</h1>
          <p>Compara calidad/precio entre restaurantes</p>
        </div>
        <button class="btn-primary">Nueva Comparativa</button>
      </div>

      <div class="empty-state">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <line x1="18" y1="20" x2="18" y2="10"></line>
          <line x1="12" y1="20" x2="12" y2="4"></line>
          <line x1="6" y1="20" x2="6" y2="14"></line>
        </svg>
        <h3>Comienza a comparar restaurantes</h3>
        <p>Selecciona restaurantes para analizar su relaci√≥n calidad/precio</p>
      </div>
    </section>

    <!-- AN√ÅLISIS DE MEN√öS -->
    <section id="analisis" class="content-section">
      <div class="section-header">
        <div>
          <h1>An√°lisis de Men√∫s</h1>
          <p>An√°lisis nutricional y detecci√≥n de al√©rgenos</p>
        </div>
        <button class="btn-primary">Analizar Nuevo Men√∫</button>
      </div>

      <div class="empty-state">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
          <polyline points="14 2 14 8 20 8"></polyline>
        </svg>
        <h3>Analiza men√∫s con IA</h3>
        <p>Sube una foto del men√∫ para obtener informaci√≥n nutricional y al√©rgenos</p>
      </div>
    </section>

    <!-- HISTORIAL -->
    <section id="historial" class="content-section">
      <div class="section-header">
        <div>
          <h1>Historial</h1>
          <p>Tus b√∫squedas y an√°lisis recientes</p>
        </div>
      </div>

      <div class="empty-state">
        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12 6 12 12 16 14"></polyline>
        </svg>
        <h3>Sin historial a√∫n</h3>
        <p>Aqu√≠ aparecer√°n tus b√∫squedas y an√°lisis recientes</p>
      </div>
    </section>

    <!-- MI PERFIL -->
    <section id="perfil" class="content-section">
      <div class="section-header">
        <div>
          <h1>Mi Perfil</h1>
          <p>Gestiona tu informaci√≥n y preferencias</p>
        </div>
      </div>

      <div class="profile-container">
        <div class="profile-card">
          <h3>Informaci√≥n Personal</h3>
          <div class="profile-info">
            <div class="info-row">
              <label>Nombre</label>
              <span id="profileName">-</span>
            </div>
            <div class="info-row">
              <label>Email</label>
              <span id="profileEmail">-</span>
            </div>
            <div class="info-row">
              <label>Rol</label>
              <span id="profileRole">-</span>
            </div>
          </div>
        </div>

        <div class="profile-card">
          <h3>Preferencias Alimentarias</h3>
          <div class="preferences-grid">
            <label class="checkbox-label">
              <input type="checkbox" id="vegano">
              <span>Vegano</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="vegetariano">
              <span>Vegetariano</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="sinGluten">
              <span>Sin Gluten</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="sinLactosa">
              <span>Sin Lactosa</span>
            </label>
          </div>
          <button class="btn-primary" id="savePreferences">Guardar Preferencias</button>
        </div>
      </div>
    </section>

    <!-- CONFIGURACI√ìN -->
    <section id="configuracion" class="content-section">
      <div class="section-header">
        <div>
          <h1>Configuraci√≥n</h1>
          <p>Ajusta las opciones de la plataforma</p>
        </div>
      </div>

      <div class="profile-container">
        <div class="profile-card">
          <h3>Notificaciones</h3>
          <div class="preferences-grid">
            <label class="checkbox-label">
              <input type="checkbox" checked>
              <span>Nuevos restaurantes cerca</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" checked>
              <span>Ofertas y promociones</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox">
              <span>Recordatorios semanales</span>
            </label>
          </div>
        </div>

        <div class="profile-card">
          <h3>Privacidad</h3>
          <div class="preferences-grid">
            <label class="checkbox-label">
              <input type="checkbox" checked>
              <span>Permitir geolocalizaci√≥n</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" checked>
              <span>Guardar historial de b√∫squedas</span>
            </label>
          </div>
        </div>
      </div>
    </section>

  </main>

  <script>
    function capitalizarNombre(nombre) {
      if (!nombre) return '';
      return nombre.charAt(0).toUpperCase() + nombre.slice(1).toLowerCase();
    }

    const user = JSON.parse(localStorage.getItem('user'));
    const token = localStorage.getItem('access_token');

    if (!user || !token) {
      window.location.href = 'login.html';
    }

    const nombreCapitalizado = capitalizarNombre(user.nombre);
    document.getElementById('headerUserName').textContent = nombreCapitalizado;
    document.getElementById('userAvatar').textContent = nombreCapitalizado.charAt(0).toUpperCase();
    document.getElementById('profileName').textContent = nombreCapitalizado;
    document.getElementById('profileEmail').textContent = user.email;
    document.getElementById('profileRole').textContent = user.rol;

    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('user');
      localStorage.removeItem('access_token');
      window.location.href = 'index.html';
    });

    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('.content-section');
    const sidebar = document.getElementById('sidebar');

    navLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        
        navLinks.forEach(nav => nav.classList.remove('active'));
        sections.forEach(section => section.classList.remove('active'));
        
        link.classList.add('active');
        const sectionId = link.getAttribute('data-section');
        const activeSection = document.getElementById(sectionId);
        activeSection.classList.add('active');

        if (sectionId === 'buscar') {
          sidebar.classList.add('visible');
        } else {
          sidebar.classList.remove('visible');
        }
      });
    });

    document.getElementById('savePreferences').addEventListener('click', () => {
      alert('Preferencias guardadas correctamente');
    });

    document.querySelector('.btn-search').addEventListener('click', () => {
      const query = document.getElementById('searchInput').value;
      const restaurantList = document.querySelector('.restaurant-list');
      
      if (query.trim()) {
        restaurantList.innerHTML = `
          <div class="restaurant-item">
            <div class="restaurant-item-icon">üçï</div>
            <div class="restaurant-item-info">
              <h4>Resultados para "${query}"</h4>
              <p>La b√∫squeda estar√° disponible pr√≥ximamente</p>
            </div>
          </div>
        `;
      }
    });

    document.getElementById('btnCompare').addEventListener('click', () => {
      // Simular clic en el enlace de comparativas
      document.querySelector('.nav-link[data-section="comparativas"]').click();
    });
  </script>
</body>
</html>